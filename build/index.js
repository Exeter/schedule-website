(function(){var a,b,c,d,e,f,g,h,i,j,k,l;f=864e5,c=252e5,b=648e5,a=b-c,d=150,Date.fromEpoch=function(a){var b;return b=new Date(0),b.setUTCSeconds(a/1e3),b},l=function(a){var b,c,d;return d=parseInt(a.slice(1,3),16),c=parseInt(a.slice(3,5),16),b=parseInt(a.slice(5,7),16),"rgba("+d+", "+c+", "+b+", 0.5)"},h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k=["January","February","March","April","May","June","July","August","September","October","November","December"],e=function(){function e(a,b){var c,d,e,g;for(this.wrapper=a,this.data=b,this.tableHeight=this.wrapper.height(),this.wrapper.append(this.el=$("<div>")).css({overflow:"hidden",position:"absolute",top:"0",bottom:"0",left:"0",right:"0"}),this.el.css({position:"absolute",top:"0",bottom:"0"}),c=!1,d=null,this.el.on("mousedown touchstart",function(a){return function(b){var e,f;return c=!0,e=null!=(f=b.pageX)?f:b.originalEvent.touches[0].pageX,d=a.el.offset().left-e,b.originalEvent.preventDefault()}}(this)),this.el.on("mousemove touchmove",function(a){return function(b){var e,f,g;if(c){if(f=null!=(g=b.pageX)?g:b.originalEvent.touches[0].pageX,e=f+d,a.el.css("left",e+"px"),-e+a.wrapper.width()>150*a.rightmost)return console.log("ADDING RIGHT"),a.addColumnRight();if(-e<150*a.leftmost)return a.addColumnLeft()}}}(this)),this.el.on("mouseup touchend",function(){return function(){return c=!1}}(this)),this.leftmost=this.rightmost=0,this.data(this.today(),this.today()+f,function(a){return function(b){return a.el.append(a.renderColumn(Date.fromEpoch(a.today()),b))}}(this)),e=1;7>=e;e++)this.addColumnRight();for(g=1;7>=g;g++)this.addColumnLeft()}return e.prototype.addColumnRight=function(){var a;return this.rightmost=this.rightmost+1,a=Date.fromEpoch(this.today()+this.rightmost*f),this.data(a.getTime(),a.getTime()+f,function(b){return function(c){return b.el.append(b.renderColumn(a,c))}}(this))},e.prototype.addColumnLeft=function(){var a;return this.leftmost=this.leftmost-1,a=Date.fromEpoch(this.today()+this.leftmost*f),this.data(a.getTime(),a.getTime()+f,function(b){return function(c){return b.el.append(b.renderColumn(a,c))}}(this))},e.prototype.today=function(){var a;return a=new Date,a.setHours(0,0,0,0),a.getTime()},e.prototype.renderColumn=function(e,g){var i,j,m,n,o,p,q;for(i=$("<div>").css({position:"absolute",display:"block",top:"0px",bottom:"0px",left:Math.round((e.getTime()-this.today())/f)*d+"px",width:d+"px",padding:"2px","text-align":"center",background:e.getTime()===this.today()?"#FFD":Math.floor(e/f)%2===1?"#FFF":"#EEE"}),i.append($("<div>").css({position:"absolute",top:"0px",left:"0px",right:"0px"}).html("<div>"+h[e.getDay()]+"</div>\n<div>"+k[e.getMonth()].slice(0,3)+" "+e.getDate()+"</div>")),o=0,p=g.length;p>o;o++)j=g[o],"pass"!==(q=j.title)&&"pass2"!==q&&(n=j.start-e.getTime()-c,m=e.getTime()+b-j.end,n>0&&a>n&&m>0&&a>m&&i.append($("<div>").css({position:"absolute",width:"100%",top:n*this.tableHeight/a+"px",left:"0",right:"0",bottom:m*this.tableHeight/a+"px","background-color":l(j.color)}).html("<div class='begin-time'>"+Date.fromEpoch(j.start).getHours()+":"+Date.fromEpoch(j.start).getMinutes()+"</div>\n<div>"+j.title+"</div>\n<div class='end-time'>"+Date.fromEpoch(j.end).getHours()+":"+Date.fromEpoch(j.end).getMinutes()+"</div>")));return i},e}(),g=new e($("#calendar"),function(a,b,c){return $.ajax({url:"/events",data:{from:a,to:b},dataType:"json",success:function(a){return c(a.result)}})}),i=$("#login-btn-wrap"),j=$("#login-form")}).call(this);